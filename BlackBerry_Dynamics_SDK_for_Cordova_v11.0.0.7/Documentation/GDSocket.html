<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: GDSocket</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: GDSocket</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>GDSocket<span class="signature">()</span><span class="type-signature"></span></h2>
        
            <div class="class-description">Implements the secure Socket communications APIs.</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="GDSocket"><span class="type-signature"></span>new GDSocket<span class="signature">()</span><span class="type-signature"></span></h4>
    

    















    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The address of the server. Can be either an Internet Protocol
address (IP address, for example "192.168.1.10"), or a fully qualified domain name
(for example "www.example.com").</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>port</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Number of the server port to which the socket will connect.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>useSSL</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">This value determines whether or not to use SSL/TLS security.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>payloadMessageType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Optional parameter that represents the type of payload message of responseData property in "message" event.
Possible values are "string" and "binary". "string" value is by default.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>disableHostVerification</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Disable host name verification, when
making an HTTPS request. Host name verification is an SSL/TLS security option.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>disablePeerVerification</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Disable certificate authenticity verification,
when making an SSL/TLS connection. Authenticity verification is an SSL/TLS security option.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>onSocketResponse</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">This function is the callback handler that is called
whenever a response is returned from the socket connection.  This function should check
the value of the responseType returned and determine the required action to take.  If the
responseType = "open", then the socketID returned in the response should be used to send
data in subsequent calls for this socket connection (see GDSocket.send).  NOTE: This
function is required to be a non-null value.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>onSocketError</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">This function is the callback handler that is called
whenever a socket error occurs.  This function should check the value of the responseType
returned and determine the required action to take.</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html">cordova-plugin-bbd-socket/assets/www/android/GDSocket.js</a>, <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html#line128">line 128</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="close"><span class="type-signature"></span>close<span class="signature">(socketID)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Call this function to close the socket connection. send() and close() methods work asynchronously.
This means that good place to close the connection is when data is received in "message" event.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>socketID</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The identifier for the open socket connection.  This value
is returned from a successful call to GDSocket.connect.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html">cordova-plugin-bbd-socket/assets/www/android/GDSocket.js</a>, <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html#line500">line 500</a>
    </li></ul></dd>
    

    

    

    
</dl>



















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>See the example below (it is added to GDSocket.send() method).</code></pre>



        
            

    

    
    <h4 class="name" id="connect"><span class="type-signature"></span>connect<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="GDSocketResponse.html">GDSocketResponse</a>}</span></h4>
    

    



<div class="description">
    Open a new socket connection.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html">cordova-plugin-bbd-socket/assets/www/android/GDSocket.js</a>, <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html#line296">line 296</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A socket response object in JSON format.  The result should be
parsed and saved as a GDSocketResponse object in the callback handler.  If the connection
was successful then the response object will be initialize with a socketID property that
can be used to send data using this socket connection (see GDSocket.send).  Since this is
an asynchronous call, the response will be returned via the onSocketResponse callback or
the onSocketError callback (whichever is applicable).
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="GDSocketResponse.html">GDSocketResponse</a></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var mySocketStreamBinary = function () {
  if(console)
     console.log('>> Socket');

  var url = '10.0.2.2'; // this ip is the ip used by the android studio emulator to connect to it's host.
  var port = '11511';
  var useSSL = false;

  var aSocket = window.plugins.GDSocket.createSocket(url, port, useSSL, 'binary'); // payloadMessageType is 'binary' in this case

  aSocket.onSocketResponse = function (obj) {
    var socketResponse = window.plugins.GDSocket.parseSocketResponse(obj);
    if(console)
      console.log (socketResponse.responseType)

    switch (socketResponse.responseType) {
      case 'open':
        break;

      case 'message':
        if(console)
             console.log('message:' , socketResponse.responseData); // Uint8Array data is going to be here because of 'binary' value of payloadMessageType
        break;

      case 'error':
        console.log('Received an error status from the socket connection.');
        break;

      case 'close':
        console.log('Socket connection closed successfully.');
        break;

      default:
        console.log('Unknown Socket response type: ' + socketResponse.responseType);
   }
  };
  // error
  aSocket.onSocketError = function (error) {
     if(console)
      console.log('The socket connection failed: ' + error);
  };

  // connect!
  aSocket.connect();
};

var mySocketStreamString = function () {
  if(console)
     console.log('>> Socket');

  var url = '10.0.2.2'; // this ip is the ip used by the android studio emulator to connect to it's host.
  var port = '11511';
  var useSSL = false;

  var aSocket = window.plugins.GDSocket.createSocket(url, port, useSSL); // payloadMessageType is 'string' in this case by default

  aSocket.onSocketResponse = function (obj) {
    var socketResponse = window.plugins.GDSocket.parseSocketResponse(obj);
    if(console)
      console.log (socketResponse.responseType)

    switch (socketResponse.responseType) {
      case 'open':
        break;

      case 'message':
        if(console)
             console.log('message:' , socketResponse.responseData); // String data is going to be here because 'string' is a default value of payloadMessageType
        break;

      case 'error':
        console.log('Received an error status from the socket connection.');
        break;

      case 'close':
        console.log('Socket connection closed successfully.');
        break;

      default:
        console.log('Unknown Socket response type: ' + socketResponse.responseType);
   }
  };
  // error
  aSocket.onSocketError = function (error) {
     if(console)
      console.log('The socket connection failed: ' + error);
  };

  // connect!
  aSocket.connect();
};</code></pre>



        
            

    

    
    <h4 class="name" id="createSocket"><span class="type-signature"></span>createSocket<span class="signature">(url, port, useSSL, payloadMessageType, streamMode)</span><span class="type-signature"> &rarr; {<a href="GDSocket.html">GDSocket</a>}</span></h4>
    

    



<div class="description">
    Call this function to create a socket and set the main parameters.  NOTE: This
funtion only initializes the socket parameters; it does not initiate data transfer nor does
it make the initial socket connection (see GDSocket.connect).
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The address of the server. Can be either an Internet Protocol
address (IP address, for example "192.168.1.10"), or a fully qualified domain name
(for example "www.example.com").</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>port</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Number of the server port to which the socket will connect.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>useSSL</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">his value determines whether or not to use SSL/TLS security.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>payloadMessageType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Optional parameter that represents the type of payload message of responseData property in "message" event.
Possible values are "string" and "binary". "string" value is by default.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>streamMode</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Optional parameter that indicates if socket is created in stream mode. true value is by default.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html">cordova-plugin-bbd-socket/assets/www/android/GDSocket.js</a>, <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html#line260">line 260</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="GDSocket.html">GDSocket</a></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>See the example below (it is added to GDSocket.send() method).</code></pre>



        
            

    

    
    <h4 class="name" id="parseHttpResponse"><span class="type-signature"></span>parseHttpResponse<span class="signature">(responseText)</span><span class="type-signature"> &rarr; {Object}</span></h4>
    

    



<div class="description">
    Call this function to transform the HTTP response text from GDSocket into an object. Applicable only in case of 'string' payloadMessageType.
Following properties are available:
<ul>
  <li>status - status string, for example, 'HTTP/1.1 200 OK'.</li>
  <li>statusCode - status code number, for example, 200.</li>
  <li>responseHeaders - an array of response headers,
      each array item is itself an object where key is response header name and value is response header value.</li>
  <li>responseBody - response body, depending on content type response body will be different.</li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>responseText</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">A string representing the HTTP response text from GDSocket.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html">cordova-plugin-bbd-socket/assets/www/android/GDSocket.js</a>, <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html#line540">line 540</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    The socket HTTP response object.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>See the example below (it is added to GDSocket.send() method).</code></pre>



        
            

    

    
    <h4 class="name" id="parseSocketResponse"><span class="type-signature"></span>parseSocketResponse<span class="signature">(responseText)</span><span class="type-signature"> &rarr; {<a href="GDSocketResponse.html">GDSocketResponse</a>}</span></h4>
    

    



<div class="description">
    Call this function to transform the socket response text into a
GDSocketResponse object.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>responseText</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">A string representing the socket response text.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html">cordova-plugin-bbd-socket/assets/www/android/GDSocket.js</a>, <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html#line523">line 523</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    The socket response object.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="GDSocketResponse.html">GDSocketResponse</a></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>See the example below (it is added to GDSocket.send() method).</code></pre>



        
            

    

    
    <h4 class="name" id="send"><span class="type-signature"></span>send<span class="signature">(data, socketID)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Call this function to send data using the open socket connection. send() method works asynchronously.
This means that good place to close the connection is when data is received in "message" event.
If socket is not closed connections is kept alive waiting for new data coming.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">UInt8Array</span>


            
            </td>

            

            

            <td class="description last">Optional parameters that indicates what data will be transmitted using the open socket.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>socketID</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The identifier for the open socket connection. This value
is returned from a successful call to GDSocket.connect.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html">cordova-plugin-bbd-socket/assets/www/android/GDSocket.js</a>, <a href="cordova-plugin-bbd-socket_assets_www_android_GDSocket.js.html#line418">line 418</a>
    </li></ul></dd>
    

    

    

    
</dl>



















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>function mySocketSend(){
var url = "httpbin.org";
var aSocket = window.plugins.GDSocket.createSocket(url, 80, true, 'string', false); // payloadMessageType is by default 'string' in this case

aSocket.onSocketResponse = function (obj) {
    var socketResponse = aSocket.parseSocketResponse(obj);

    switch (socketResponse.responseType) {
        case "open":
            var httpRequest = "GET / HTTP/1.1\r\n" +
                "Host: httpbin.org:80\r\n" +
                "Connection: close\r\n" +
                "\r\n";

            aSocket.send(socketResponse.socketID, httpRequest);
            break;

        case "message":
            var httpRespObj = aSocket.parseHttpResponse(socketResponse.responseData);
            console.log(httpRespObj.status)
            console.log(httpRespObj.statusCode)
            console.log(httpRespObj.responseHeaders)
            console.log(httpRespObj.responseBody)
            aSocket.close(socketResponse.socketID);
            break;

        case "error":
            // handle error
            break;

        case "close":
            console.log("Socket connection closed");
            break;

        default:
            // handle default case
    }
};

// error
aSocket.onSocketError = function (error) {
    // handle error
};

// connect!
aSocket.connect();

}</code></pre>



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="GDAppKinetics.html">GDAppKinetics</a></li><li><a href="GDApplication.html">GDApplication</a></li><li><a href="GDCacheController.html">GDCacheController</a></li><li><a href="GDFormData.html">GDFormData</a></li><li><a href="GDHttpRequest.html">GDHttpRequest</a></li><li><a href="GDHttpResponse.html">GDHttpResponse</a></li><li><a href="GDInterAppCommunication.html">GDInterAppCommunication</a></li><li><a href="GDPushChannel.html">GDPushChannel</a></li><li><a href="GDPushChannelResponse.html">GDPushChannelResponse</a></li><li><a href="GDSecureStorage.html">GDSecureStorage</a></li><li><a href="GDServerSideServices.html">GDServerSideServices</a></li><li><a href="GDSocket.html">GDSocket</a></li><li><a href="GDSocketResponse.html">GDSocketResponse</a></li><li><a href="GDSpecificPolicies.html">GDSpecificPolicies</a></li><li><a href="GDTokenHelper.html">GDTokenHelper</a></li><li><a href="Launcher.html">Launcher</a></li><li><a href="WebSocket.html">WebSocket</a></li><li><a href="XMLHttpRequest.html">XMLHttpRequest</a></li></ul>
<h3>Other</h3><ul><li><a href=LICENCES.html>LICENCES</a></li></ul></nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Wed Oct 19 2022 06:05:35 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>