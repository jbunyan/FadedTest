<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: GDPushChannel</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: GDPushChannel</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>GDPushChannel<span class="signature">()</span><span class="type-signature"></span></h2>
        
            <div class="class-description">This class encapsulates the GD Push Channel object.  The Push Channel framework is a
BlackBerry Dynamics (GD) feature used to receive notifications from an application server.  Note that
the GD Push Channel feature is not part of the native iOS notification feature set.
<br/>
Push Channels are established from the client end, then used by the server when needed. The sequence
of events is as follows:<br/>
<ol>
<li>The client sets an event handler for Push Channel notifications</li>
<li>The client application requests a Push Channel token from the BlackBerry Dynamics proxy infrastructure</li>
<li>The client application sends the token to its server using, for example, a socket or HTTP request</li>
<li>The client can now wait for a Push Channel notification</li>
</ol>
The BlackBerry Dynamics platform keeps data communications between client and server alive while the client is
waiting for a Push Channel notification. This is achieved by sending "heartbeat" messages at an interval
that is dynamically optimized for battery and network performance.<br/>
<br/></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="GDPushChannel"><span class="type-signature"></span>new GDPushChannel<span class="signature">()</span><span class="type-signature"></span></h4>
    

    















    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>onChannelResponse</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">This function is the callback handler that is called
whenever a response is returned from the channel connection.  This function should check
the value of the responseType returned and determine the required action to take.  If the
responseType = "open", then the channelID returned in the response should be used to reference this
channel in subsequent calls over this connection (see <a href="#open">GDPushChannel.open</a>).  NOTE: This
function is required to be a non-null value.</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cordova-plugin-bbd-push_assets_www_android_GDPushChannel.js.html">cordova-plugin-bbd-push/assets/www/android/GDPushChannel.js</a>, <a href="cordova-plugin-bbd-push_assets_www_android_GDPushChannel.js.html#line95">line 95</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="close"><span class="type-signature"></span>close<span class="signature">(channelID)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Call this function to initiate permanent disconnection of the Push Channel.  This function
creates a request for Push Channel termination to be sent to the BlackBerry Dynamics proxy infrastructure Network
Operating Center (NOC). The NOC will delete the channel, and invalidate the Push Channel token that was
issued when the channel was initially opened.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>channelID</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The unique ID for the push channel to close.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cordova-plugin-bbd-push_assets_www_android_GDPushChannel.js.html">cordova-plugin-bbd-push/assets/www/android/GDPushChannel.js</a>, <a href="cordova-plugin-bbd-push_assets_www_android_GDPushChannel.js.html#line267">line 267</a>
    </li></ul></dd>
    

    

    

    
</dl>



















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>See the example above (it is added to GDPushChannel.open() method).</code></pre>



        
            

    

    
    <h4 class="name" id="isAvailable"><span class="type-signature"></span>isAvailable<span class="signature">(responseCallback)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    This function returns the current status of the Push Channel connection.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>responseCallback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">Callback function to invoke when the function returns.
A single result string will be passed as the input to the callback function: "true" or "false".</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cordova-plugin-bbd-push_assets_www_android_GDPushChannel.js.html">cordova-plugin-bbd-push/assets/www/android/GDPushChannel.js</a>, <a href="cordova-plugin-bbd-push_assets_www_android_GDPushChannel.js.html#line306">line 306</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    "true" or "false".
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>See the example &lt;a href="./GDPushChannel.html">here&lt;/a></code></pre>



        
            

    

    
    <h4 class="name" id="open"><span class="type-signature"></span>open<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="GDPushChannelResponse.html">GDPushChannelResponse</a>}</span></h4>
    

    



<div class="description">
    Call this function to open the Push Channel. This function can only be called when
the channel is not opened.  This function creates a request for a Push Channel to be sent to the Good
Dynamics proxy infrastructure Network Operating Center (NOC). The NOC will create the channel, and
issue a Push Channel token, which can then be used to identify the channel. The application code that
handles the Intent must initiate sending of the Push Channel token to the application server, out of
band. The application server will then be able to use the token to address Push Channel messages back
to the application, via the BlackBerry Dynamics proxy infrastructure.
See the Push Channel Back-End API of Blackberry Dynamics Docs
(<a href="https://developer.blackberry.com/devzone/files/blackberry-dynamics/android/enumcom_1_1good_1_1gd_1_1push_1_1_push_channel_event_type.html#a7bb49e261987a2c4aee1067014700544">
Push Channel Open & Push Channel Back-End API of Blackberry Dynamics</a>).
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cordova-plugin-bbd-push_assets_www_android_GDPushChannel.js.html">cordova-plugin-bbd-push/assets/www/android/GDPushChannel.js</a>, <a href="cordova-plugin-bbd-push_assets_www_android_GDPushChannel.js.html#line153">line 153</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A push channel response object in JSON format.  The result should be
parsed and saved as a GDPushChannelResponse object in the callback handler.  If the channel was
opened then the response object will be initialized with a channelID property that can be used to
reference this channel connection.  Additionally, the response will also contain a token that uniquely
identifies the device associated with this push channel.  Since this is an asynchronous call, the
response will be returned via the onChannelResponse callback.

Note that it can take some time for establishing push connection during opening first Push Channel.
Please, wait until "onChannelResponse" callback is called with "GDPushChannelResponse" response object.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="GDPushChannelResponse.html">GDPushChannelResponse</a></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>function myPushChannel() {
    var savedChannelID,
        pushChannelToken;
    var channel = new window.plugins.GDPushChannel(pushChannelResponse);
    channel.open();

    channel.isAvailable(function(result) {
        console.log("GDPushChannel status: ", result);
    });

    //-- GDPushChannelResponse
    function pushChannelResponse(response) {
        try {
            var channelResponse = channel.parseChannelResponse(response);

            console.log("Got response channelID: " + channelResponse.channelID);
            console.log("Got response responseType: " + channelResponse.responseType);
            console.log("Got response responseData: " + channelResponse.responseData);
            switch (channelResponse.responseType) {
                case "open":
                    savedChannelID = channelResponse.channelID;
                    pushChannelToken = channelResponse.responseData;
                    console.log("Channel connection opened with ID :" + savedChannelID);
                    break;

                //  Send application server the savedChannelID (token) here at following format:
                //   POST https://gdmdc.good.com//GNP1.0?method=notify HTTP/1.1
                //   Host: gdmdc.good.com:443
                //   Content-Type: text/plain; charset=utf-8
                //   Content-length: 30
                //   X-Good-GNP-Token: pushChannelToken
                //  For more details see Push Channel Back-End API:
                //   https://developer.blackberry.com/devzone/files/blackberry-dynamics/ios/_g_n_p.html

                case "message":
                    // handle pushed message from the server
                    channel.close(channelResponse.channelID);
                    break;
                case "error":
                    console.log("Received an error status from the channel connection.");
                    break;
                case "close":
                    console.log("Channel connection closed successfully.");
                    break;
                case "pingFail":
                    break;
                default:
                    break;
            }
        } catch (e) {
            throw new Error("Invalid response object sent to channel response callback handler.");
        }
    };

};</code></pre>



        
            

    

    
    <h4 class="name" id="parseChannelResponse"><span class="type-signature"></span>parseChannelResponse<span class="signature">(responseText)</span><span class="type-signature"> &rarr; {<a href="GDPushChannelResponse.html">GDPushChannelResponse</a>}</span></h4>
    

    



<div class="description">
    Call this function to transform the push channel response text into a
GDPushChannelResponse object.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>responseText</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">A string representing the push channel response text.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cordova-plugin-bbd-push_assets_www_android_GDPushChannel.js.html">cordova-plugin-bbd-push/assets/www/android/GDPushChannel.js</a>, <a href="cordova-plugin-bbd-push_assets_www_android_GDPushChannel.js.html#line289">line 289</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    The push channel response object.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="GDPushChannelResponse.html">GDPushChannelResponse</a></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>See the example &lt;a href="./GDPushChannel.html">here&lt;/a></code></pre>



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="GDAppKinetics.html">GDAppKinetics</a></li><li><a href="GDApplication.html">GDApplication</a></li><li><a href="GDCacheController.html">GDCacheController</a></li><li><a href="GDFormData.html">GDFormData</a></li><li><a href="GDHttpRequest.html">GDHttpRequest</a></li><li><a href="GDHttpResponse.html">GDHttpResponse</a></li><li><a href="GDInterAppCommunication.html">GDInterAppCommunication</a></li><li><a href="GDPushChannel.html">GDPushChannel</a></li><li><a href="GDPushChannelResponse.html">GDPushChannelResponse</a></li><li><a href="GDSecureStorage.html">GDSecureStorage</a></li><li><a href="GDServerSideServices.html">GDServerSideServices</a></li><li><a href="GDSocket.html">GDSocket</a></li><li><a href="GDSocketResponse.html">GDSocketResponse</a></li><li><a href="GDSpecificPolicies.html">GDSpecificPolicies</a></li><li><a href="GDTokenHelper.html">GDTokenHelper</a></li><li><a href="Launcher.html">Launcher</a></li><li><a href="WebSocket.html">WebSocket</a></li><li><a href="XMLHttpRequest.html">XMLHttpRequest</a></li></ul>
<h3>Other</h3><ul><li><a href=LICENCES.html>LICENCES</a></li></ul></nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Wed Oct 19 2022 06:05:35 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>